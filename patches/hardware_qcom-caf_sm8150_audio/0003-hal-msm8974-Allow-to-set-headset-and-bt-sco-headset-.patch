From 5aea591c2cd5ff90305d29c210ea2f3fd445022b Mon Sep 17 00:00:00 2001
From: Arian <arian.kulmer@web.de>
Date: Mon, 17 Aug 2020 17:37:31 +0200
Subject: [PATCH] hal: msm8974: Allow to set headset and bt-sco-headset echo
 references

Change-Id: I23efff0fb40cb9944b1d9a40e4e053707e8c873b
---
 hal/msm8974/platform.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/hal/msm8974/platform.c b/hal/msm8974/platform.c
index 7ab28115..9e4f9b42 100644
--- a/hal/msm8974/platform.c
+++ b/hal/msm8974/platform.c
@@ -1855,6 +1855,12 @@ void platform_set_echo_reference(struct audio_device *adev, bool enable,
         else if (out_device & AUDIO_DEVICE_OUT_USB_HEADSET)
             strlcat(ec_ref_mixer_path, " usb-headphones",
                     MIXER_PATH_MAX_LENGTH);
+        else if (out_device & AUDIO_DEVICE_OUT_WIRED_HEADSET)
+            strlcat(ec_ref_mixer_path, " headset",
+                    MIXER_PATH_MAX_LENGTH);
+        else if (out_device & AUDIO_DEVICE_OUT_BLUETOOTH_SCO_HEADSET)
+            strlcat(ec_ref_mixer_path, " bt-sco-headset",
+                    MIXER_PATH_MAX_LENGTH);
 
         if (audio_route_apply_and_update_path(adev->audio_route,
                                               ec_ref_mixer_path) == 0)
-- 
2.20.1

